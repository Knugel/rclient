(this.webpackJsonprclient=this.webpackJsonprclient||[]).push([[0],{31:function(t,e,n){},33:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n(1),c=n.n(r),s=n(22),i=n.n(s),u=(n(31),n(12)),o=n(4),d=n(3),h=n.n(d),l=n(6),p=n(11),j=n(14),f=n(15),b=function(){function t(){Object(j.a)(this,t),this.DEVICE_ID="DO_NOT_TRACK_THIS_DEVICE",this._token=void 0}return Object(f.a)(t,[{key:"get",value:function(){var e=Object(l.a)(h.a.mark((function e(n,a){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a&&(n="".concat(n,"?").concat(a)),e.next=3,this.getDefaultHeaders();case 3:return r=e.sent,c={headers:r,method:"GET"},e.next=7,this.fetch(t.API_URL+n,c);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDefaultHeaders",value:function(){var t=Object(l.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._token){t.next=4;break}return t.next=3,this.fetchToken();case 3:this._token=t.sent;case 4:return t.abrupt("return",new Headers({Authorization:"bearer ".concat(this._token),"Content-Type":"application/json"}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fetchToken",value:function(){var e=Object(l.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"Basic ".concat(window.btoa("".concat(t.CLIENT_ID,":"))),"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},method:"POST",body:"grant_type=".concat(encodeURIComponent("https://oauth.reddit.com/grants/installed_client"),"&device_id=").concat(this.DEVICE_ID)},e.next=3,this.fetch(t.AUTH_URL,n);case 3:return a=e.sent,e.abrupt("return",a.access_token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var t=Object(l.a)(h.a.mark((function t(e,n){var a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.fetch(e,n);case 2:if(!(a=t.sent).ok){t.next=9;break}return t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 9:if(!(r=a.headers.get("www-authenticate"))||!r.includes("invalid_token")){t.next=19;break}return t.next=13,this.fetchToken();case 13:return this._token=t.sent,n.headers.Authorization="bearer ".concat(this._token),t.next=18,this.fetch(e,n);case 18:return t.abrupt("return",t.sent);case 19:return t.abrupt("return",Promise.reject(a.statusText));case 20:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}();b.API_URL="https://oauth.reddit.com/",b.AUTH_URL="https://www.reddit.com/api/v1/access_token",b.CLIENT_ID="LzBGozxpbmJNRA";var x=new b,O=new(function(){function t(){Object(j.a)(this,t)}return Object(f.a)(t,[{key:"about",value:function(){var t=Object(l.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("r/".concat(e,"/about"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"posts",value:function(){var t=Object(l.a)(h.a.mark((function t(e,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new URLSearchParams({raw_json:"1"}),n&&a.append("after",n),t.next=4,x.get("r/".concat(e),a);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"comments",value:function(){var t=Object(l.a)(h.a.mark((function t(e,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("r/".concat(e,"/comments/").concat(n),new URLSearchParams({raw_json:"1"}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}()),m=n(20),v=n(24);n(33);function k(){var t=Object(o.f)().id,e=Object(r.useState)(),n=Object(p.a)(e,2),c=n[0],s=(n[1],Object(r.useState)()),i=Object(p.a)(s,2),d=(i[0],i[1]),j=Object(r.useState)(),f=Object(p.a)(j,2),b=f[0],x=f[1];return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.about(t);case 2:n=e.sent,d(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.posts(t,c);case 2:n=e.sent,x(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,c]),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{className:"content",children:null===b||void 0===b?void 0:b.data.children.map((function(e,n){return Object(a.jsx)(u.b,{to:"/r/".concat(t,"/comments/").concat(e.data.id),children:Object(a.jsxs)("div",{className:"post "+(e.data.stickied?"sticky":""),children:[e.data.stickied&&Object(a.jsx)(v.a,{className:"sticky-pin"}),Object(a.jsx)("p",{className:"title",children:Object(a.jsx)("b",{children:e.data.title})}),Object(a.jsxs)("div",{className:"footer",children:[Object(a.jsx)("div",{className:"left",children:e.data.link_flair_text&&Object(a.jsx)("span",{className:"flair",style:{backgroundColor:e.data.link_flair_background_color},children:e.data.link_flair_text})}),Object(a.jsxs)("div",{className:"right",children:[Object(a.jsxs)("span",{className:"upvotes",children:[Object(a.jsx)(m.a,{}),e.data.ups]}),Object(a.jsxs)("span",{className:"comments",children:[Object(a.jsx)(m.b,{}),Object(a.jsx)("span",{children:e.data.num_comments})]}),Object(a.jsxs)("span",{className:"author",children:["by ",Object(a.jsxs)("span",{children:["u/",e.data.author]})]})]})]})]},n)})}))})})}var w=n(25),_=n.n(w);n(39);function y(){var t=Object(o.f)(),e=t.id,n=t.postId,c=Object(r.useState)(),s=Object(p.a)(c,2),i=s[0],u=s[1],d=Object(r.useState)(),j=Object(p.a)(d,2),f=j[0],b=j[1];Object(r.useEffect)((function(){function t(){return(t=Object(l.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.comments(e,n);case 2:a=t.sent,b(a[0].data.children[0]),u(a[1]);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,n]);var x=function(t){return t?_.a.sanitize(t):""};return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsxs)("div",{className:"post",children:[Object(a.jsxs)("h3",{children:[" ",null===f||void 0===f?void 0:f.data.title," "]}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:x(null===f||void 0===f?void 0:f.data.selftext_html)}})]}),Object(a.jsx)("div",{className:"comments",children:null===i||void 0===i?void 0:i.data.children.map((function(t,e){return Object(a.jsxs)("div",{className:"comment",children:[Object(a.jsx)("span",{children:t.data.ups}),Object(a.jsxs)("span",{children:[" by u/",t.data.author]}),Object(a.jsx)("div",{className:"comment-body",dangerouslySetInnerHTML:{__html:x(t.data.body_html)}})]})}))})]})})}function N(){return Object(a.jsx)(u.a,{children:Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{exact:!0,path:"/"}),Object(a.jsx)(o.a,{path:"/r/:id/comments/:postId",children:Object(a.jsx)(y,{})}),Object(a.jsx)(o.a,{path:"/r/:id",children:Object(a.jsx)(k,{})})]})})}var g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),c(t),s(t)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root")),g()}},[[40,1,2]]]);
//# sourceMappingURL=main.6d54cb07.chunk.js.map